<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="google-site-verification" content="GzSv7bpZZf8ctbKx5TxJkS9UvRxxMVoJxj9prcOQu4E" />
<meta property="og:title" content="IMG" />
<meta property="og:description" content="IMG ENGINEERED BY SHAYNE" />
<meta property="og:image" content="https://i.postimg.cc/gkKWpqcw/Untitled-design-(9).png" />
<meta property="og:url" content="https://haderachhage.github.io/IMG" />
<meta property="og:type" content="website" />
<title>IMGHage</title>

<style>
  * { margin:0; padding:0; box-sizing:border-box; }

  /* THEME TOKENS (match your index page frame tokens) */
  :root{
    --bg:#fff;
    --ink:#000;
    --link:#111;
    --hover-ink:#fff;
    --hover-underline:#000;

    /* IMPORTANT: same names as your index file */
    --line:#d7d7d7;  /* used by hero-media border */
    --soft:#f5f5f5;  /* used by hero-media background */

    color-scheme: light;

    /* showcase tokens */
    --showcase-max: 760px;
    --showcase-pad-x: 16px;
    --showcase-top-pad: 120px;
    --showcase-bottom-pad: 140px;

    --card-gap: 18px;
    --cascade-overlap: 46px;
    --wobble: 14px;

    /* squared corners */
    --card-radius: 0px;
  }

  @media (prefers-color-scheme: dark){
    :root{
      --bg:#000;
      --ink:#fff;
      --link:#fff;
      --hover-ink:#000;
      --hover-underline:#fff;

      /* IMPORTANT: match your index dark theme */
      --line:#fff;
      --soft:#000;

      color-scheme: dark;
    }
  }

  html, body {
    background: var(--bg);
    color: var(--ink);
    font-family: "EB Garamond", serif;
    overflow-x: hidden;
    overflow-y: auto;
    min-height: 100%;
  }

  /* FULL-PAGE background hover (cover) */
  body::before{
    content:"";
    position:fixed;
    inset:0;
    background-image:url(https://i.ibb.co/wNXhrk5z/Untitled-design-9.png);
    background-size:cover;
    background-position:center;   /* FIXED */
    background-repeat:no-repeat;
    opacity:0;
    pointer-events:none;
    z-index:0;
    transition:opacity 0s;
  }

  /* Trigger cover on hover (IMG + DSN + AUD) */
  body:has(.img-link:hover)::before{ opacity:1; }
  body:has(.dsn-link:hover)::before{ opacity:1; }
  body:has(.aud-link:hover)::before{ opacity:1; }

  /* LEFT COLUMN (fixed so + stays on screen always) */
  .left-col{
    position:fixed;
    left:104px;
    top:55%;
    transform:translateY(-50%);
    transform: scaleY(3.25);
    display:flex;
    flex-direction:column;
    gap:10px;
    z-index:6;
    text-transform:uppercase;
    user-select:none;
  }

  .left-col a{
    font-size: clamp(54px, 5.2vw, 130px);
    font-weight: 500;
    transform: scaleY(2.25);
    transform-origin: right center;
    letter-spacing: -0.10em;
    line-height: 0.70;
    white-space: nowrap;
    color: var(--link);
    text-decoration: none;
  }
  .left-col a:hover{ text-decoration: underline; }

  /* CENTER COLUMN */
  .center-col {
    position: relative;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: -100000000px;
    text-transform: uppercase;
    user-select: none;
    z-index:5;
  }

  .center-col a {
    display:inline-block; /* makes hover box reliable */
    font-size: clamp(54px, 5.2vw, 130px);
    font-weight: 500;
    transform: scaleY(2.25);
    transform-origin: center;
    letter-spacing: -0.10em;
    line-height: 0.7;
    white-space: nowrap;
    color: var(--link);
    padding: 0.15em 0.25em;
    text-decoration: none;
  }

  .center-col a:hover {
    background-size: cover;
    background-position: center; /* FIXED */
    background-repeat: no-repeat;
    color: var(--hover-ink);
    text-decoration: underline;
    text-decoration-color: var(--hover-underline);
  }

  /* Link-specific hover images (optional but keeps your intent) */
  .img-link:hover {
    background-image: url(https://i.ibb.co/s91dCb6Z/Untitled-design-69.png);
  }
  /* If you don't have an aud-hover.jpg, this was effectively "not working" */
  .aud-link:hover {
    background-image: url(https://i.ibb.co/s91dCb6Z/Untitled-design-69.png);
  }

  /* RIGHT RAIL (fixed) */
  .right-rail{
    position:fixed;
    right:24px;
    top:50%;
    transform:translateY(-50%);
    display:flex;
    flex-direction:column;
    align-items:flex-end;
    user-select:none;
    text-transform:uppercase;
    z-index:6;
    gap:18px;
  }

  .right-rail a,
  .right-rail span{
    font-size:clamp(54px, 5.2vw, 130px);
    font-weight:500;
    transform:scaleY(2.25);
    transform-origin:right center;
    letter-spacing:-0.10em;
    line-height:0.70;
    white-space:nowrap;
    text-decoration:none;
    color:var(--ink);
  }

  .right-rail .plus{
    transform:scaleY(2.35);
    letter-spacing:-0.16em;
    opacity:.95;
    pointer-events:none;
  }
  .right-rail a:hover{ text-decoration: underline; }

  /* RIGHT EMBED PANEL */
  .embed-panel{
    position:fixed;
    top:50%;
    right:24px;
    transform:translateY(-50%);
    width:min(520px, 38vw);
    z-index:7;
    display:none;
  }
  .embed-panel.is-open{ display:block; }

  /* SHOWCASE */
  .showcase{
    position: relative;
    z-index:1;
    width: min(var(--showcase-max), 100%);
    margin: 0 auto;
    padding: var(--showcase-top-pad) var(--showcase-pad-x) var(--showcase-bottom-pad);
  }

  .stack{
    display:flex;
    flex-direction:column;
    gap: var(--card-gap);
    align-items:center;
  }

  .card{
    width:120%;
    border-radius: var(--card-radius);
    overflow:hidden;

    border:1px solid var(--line);
    background:var(--soft);
    display:block;

    will-change: transform, opacity;
    opacity: 0;
    transform: translateY(18px);
    transition: opacity .45s ease, transform .55s ease;
  }

  .card:not(:first-child){ margin-top: calc(-1 * var(--cascade-overlap)); }
  .card:nth-child(odd){ transform: translateY(18px) translateX(calc(-1 * var(--wobble))); }
  .card:nth-child(even){ transform: translateY(18px) translateX(var(--wobble)); }

  .card.is-visible{
    opacity:1;
    transform: translateY(0) translateX(0);
  }

  .card img{
    width:100%;
    height:auto;
    display:block;
    background:var(--soft);
    -webkit-user-drag: none;
    user-select: none;
    cursor: zoom-in;
  }

  /* MOBILE */
  @media (max-width: 768px){
    .left-col{
      left:50%;
      top:18px;
      transform:translateX(-50%);
      flex-direction:row;
      align-items:baseline;
      gap:14px;
    }

    .center-col{
      padding: 64px 16px 16px;
      gap: 44px;
    }

    .center-col a{
      max-width: 92vw;
      text-align:center;
      white-space: normal;
    }

    .right-rail{
      right:14px;
      top:auto;
      bottom:18px;
      transform:none;
      flex-direction:row;
      align-items:baseline;
      gap:14px;
    }
    .right-rail a,
    .right-rail span{
      font-size:clamp(22px, 5.5vw, 30px);
      transform:scaleY(2.1);
      transform-origin:center;
      letter-spacing:-0.10em;
      line-height:0.70;
    }
    .right-rail .plus{
      transform:scaleY(2.25);
      letter-spacing:-0.16em;
    }

    .embed-panel{
      top:auto;
      left:14px;
      right:14px;
      bottom:14px;
      width:auto;
      transform:none;
    }

    .embed-panel iframe{
      width:100%;
      height:320px;
      display:block;
    }

    :root{ --cascade-overlap: 34px; --wobble: 10px; }
    .showcase{ padding-top: 110px; }
  }

  /* PHONE ONLY: raise LISTEN TO KOSS */
  @media (max-width: 480px){
    .center-col .img-link{
      position: relative;
      top: -80px;
    }
  }

  @media (prefers-reduced-motion: reduce){
    .card, .card.is-visible{
      transition:none;
      opacity:1;
      transform:none;
    }
  }

  /* ============================
     LIGHTBOX (ADDED ONLY)
     ============================ */
  .lightbox{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.92);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:9999;
    cursor:zoom-out;
  }
  .lightbox.is-open{ display:flex; }

  .lightbox img{
    max-width:92vw;
    max-height:92vh;
    object-fit:contain;
    background:transparent;
    -webkit-user-drag: none;
    user-select: none;
    pointer-events: auto;
  }

  /* LIGHTBOX ARROWS (UPDATED: signature + style) */
  .lightbox-arrow{
    position: fixed;
    top: 50%;
    transform: translateY(-50%) scaleY(2.35);
    font-size:clamp(54px, 5.2vw, 130px);
    font-weight:500;
    transform-origin:center;
    letter-spacing:-0.16em;
    line-height:0.70;
    white-space:nowrap;
    text-decoration:none;
    color:var(--ink);
    cursor: pointer;
    user-select: none;
    z-index: 10000;
    padding: 12px;
  }
  .lightbox-arrow.left{ left: 24px; }
  .lightbox-arrow.right{ right: 24px; }
  .lightbox-arrow:hover{ opacity: 0.7; }

  /* ✅ ONLY CHANGE: FORCE WHITE ARROWS IN LIGHT MODE */
  @media (prefers-color-scheme: light){
    .lightbox-arrow{ color:#fff; }
  }


  /* ============================
     DESKTOP-ONLY LIGHTBOX ENHANCEMENTS
     - Top-right nav (mobile-style) only while lightbox is open on desktop
     - Story (scroll) mode for 9:16 + 2:3-like ratios only on desktop
     ============================ */
  @media (min-width: 769px){
    /* Top-right: show only HJEM / DSN / AUD links while lightbox is open */
    body.lb-open .right-rail{
      top: 18px;
      bottom: auto;
      transform: none;
      flex-direction: row;
      align-items: baseline;
      gap: 14px;

      /* ensure it sits ABOVE the lightbox overlay */
      z-index: 10001;
      pointer-events: auto;
    }
    body.lb-open .right-rail span{ display:none; }
    body.lb-open .right-rail a{
      font-size: clamp(22px, 5.5vw, 30px);
      transform: scaleY(2.1);
      transform-origin: right center;
      letter-spacing: -0.10em;
      line-height: 0.70;

      /* visible on the dark overlay */
      color: #fff;
    }

    /* Story mode: fill width and allow vertical scroll */
    .lightbox.is-story{
      align-items: flex-start;
      justify-content: center;
      overflow-y: auto;
      overflow-x: hidden;
      padding: 4vh 0;
      cursor: default;
    }
    .lightbox.is-story img{
      width: min(80vw, 1100px);
      max-width: min(80vw, 1100px);
      max-height: none;
      height: auto;
      display: block;
      margin: 0 auto;
    }

    /* Zoom mode (desktop only): e.g., 3000x3093.jpg
       - slightly larger than default contain
       - allows vertical scroll if needed */
    .lightbox.is-zoom{
      align-items: center;
      justify-content: center;
      overflow-y: auto;
      overflow-x: hidden;
      padding: 3vh 0;
      cursor: default;
    }
    .lightbox.is-zoom img{
      width: min(88vw, 1200px);
      max-width: min(88vw, 1200px);
      max-height: none;
      height: auto;
      display: block;
      margin: 0 auto;
    }
  }
</style>
</head>

<body>

  <!-- LEFT COLUMN -->
  <div class="left-col">
    <a href="#"></a>
    <a href="DASS" class="dassLink" id="dassLink">+</a>
    <a href="#"></a>
  </div>

  <!-- RIGHT RAIL LINKS -->
  <nav class="right-rail" aria-label="Primary sections">
    <a href="/" class="" id="">HJEM</a>
    <span class="plus"></span>
    <span class="plus"></span>
    <span class="plus"></span>
    <span class="plus"></span>
    <span class="plus"></span>
    <a href="/dsn">DSN</a>
    <span class="plus">+</span>
    <a href="/aud">AUD</a>
  </nav>

  <!-- CENTER COLUMN -->
  <div class="center-col">
    <a style="font-size:20px" href="https://open.spotify.com/album/7bRA5rkWPEjQl1LERPyYeb?si=0CEN8APJQB-wJQyHEJtqkQ" class="img-link"></a>
    <a href="https://www.instagram.com/______haderachhage/" class="dsn-link"></a>
    <a href="/img" class="aud-link" id="dassLink">UPDA - TE</a>
    <a href="/" class="aud-link" id="dassLink">  </a>
  </div>

  <!-- IMAGE SHOWCASE -->
  <main class="showcase" aria-label="Image showcase">
    <section class="stack">
    <figure class="card"><img src="https://i.ibb.co/qLBtDVTP/3image.png" alt=""></figure>
    <figure class="card"><img src="https://i.ibb.co/spSMvVvy/2image.png" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/PZQSQ1Yf/DSC-6423.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/G3tvVHqs/DSC-1442.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/wZdCs46P/DSC-1441.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/7xvmrFN9/DSC-9537.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/1t1F59F9/3000x3093.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/gZTfqJdV/DSC-1368.jpg" alt="LEAF"></figure>
      <figure class="card"><img src="https://i.ibb.co/k6JnSPDc/2-DSC-7442-Kopi.jpg" alt=""></figure>

      <figure class="card"><img src="https://i.ibb.co/q3KqxqqN/DRuvr-B4.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/w2ZrHsH/Pedxyal.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/1fxj0Hwf/DSC-7325.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/S4Dzfv36/DSC-9774.jpg" alt="SINGLE STICK"></figure>
      <figure class="card"><img src="https://i.ibb.co/RTJtcL6N/DSC-9775.jpg" alt="BEACH"></figure>
      <figure class="card"><img src="https://i.ibb.co/XZnRpPYd/DSC-9773.jpg" alt="BRYCE"></figure>

      <figure class="card"><img src="https://i.ibb.co/0RgT4DCv/DSC-9687.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/4RZMgkm1/DSC-9661.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/3ybDTqZM/DSC-9529.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/j9jydKxY/DSC-6925.png" alt="AAMIRAH RED"></figure>
      <figure class="card"><img src="https://i.ibb.co/Qv5ss0wL/DSC-6897-1.jpg" alt="AAMIRAH LAYING DOWN1"></figure>
      <figure class="card"><img src="https://i.ibb.co/4R9JYmSF/DSC-6895.jpg" alt="AAMIRAH LAYING DOWN2"></figure>
      <figure class="card"><img src="https://i.ibb.co/m51HNFFY/DSC-6901.jpg" alt="AAMIRAH LAYING DOWN3"></figure>
      <figure class="card"><img src="https://i.ibb.co/JjMqM0XC/DSC-6877.jpg" alt="AAMIRAH LAYING DOWN4"></figure>
      <figure class="card"><img src="https://i.ibb.co/2Ym5JvHh/DSC-6735.jpg" alt="AAMIRAH LAYING DOWN5"></figure>
      <figure class="card"><img src="https://i.ibb.co/RpjHKcHM/DSC-6728.jpg" alt="AAMIRAH LAYING DOWN6"></figure>
      <figure class="card"><img src="https://i.ibb.co/Xfq7rdW7/tumblr-227db31e44870ac1f13f3668dca9e5b5-7738ffbe-1280.jpg" alt="FIRE"></figure>
      <figure class="card"><img src="https://i.ibb.co/DfS6gbwB/DSC-9946.jpg" alt="FIRE"></figure>
      <figure class="card"><img src="https://i.ibb.co/RTrHS8NY/DSC-0005.jpg" alt="IMG 05"></figure>
      <figure class="card"><img src="https://i.ibb.co/8g0JKyWw/DSC-9995.jpg" alt="FIRE"></figure>
      <figure class="card"><img src="https://i.ibb.co/PfHfCp0/DSC-5929-1.jpg" alt="FIRE"></figure>
      <figure class="card"><img src="https://i.ibb.co/RLtCtf5/DSC-6299.jpg" alt="FIRE"></figure>
      <figure class="card"><img src="https://i.ibb.co/N6m51YK0/DSC-8551.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/S7PHBVCt/DSC-7213.jpg" alt="Gabe's Eyes"></figure>
      <figure class="card"><img src="https://i.ibb.co/hJNF5H81/DSC-7322.jpg" alt="Gabe1"></figure>
      <figure class="card"><img src="https://i.ibb.co/cKYdbnXK/DSC-7355.jpg" alt="Gabe2"></figure>
      <figure class="card"><img src="https://i.ibb.co/fVj3n2QX/DSC-7406.jpg" alt="Gabe3"></figure>
      <figure class="card"><img src="https://i.ibb.co/qM3fKTh3/DSC-9716.jpg" alt=""></figure>
      <figure class="card"><img src="https://i.ibb.co/wqYY17n/DSC-9919.jpg" alt=""></figure>
    </section>
  </main>

  <!-- EMBED PANEL -->
  <div class="embed-panel" id="embedPanel">
    <iframe
      style="border-radius: 24px"
      src="https://untitled.stream/embed/JsMabpfmdQZF"
      width="100%"
      height="344"
      allowfullscreen
      allow="picture-in-picture"
      frameborder="0"
      loading="lazy">
    </iframe>
  </div>

  <div class="lightbox" id="lightbox">
    <div class="lightbox-arrow left" id="lbPrev">+</div>
    <img src="" alt="" draggable="false">
    <div class="lightbox-arrow right" id="lbNext">+</div>
  </div>

<script>
  const dassLink = document.getElementById('dassLink');
  const embedPanel = document.getElementById('embedPanel');

  dassLink.addEventListener('click', (e) => {
    e.preventDefault();
    embedPanel.classList.toggle('is-open');
  });

  const cards = document.querySelectorAll('.card');
  const io = new IntersectionObserver((entries) => {
    for (const e of entries) {
      if (e.isIntersecting) e.target.classList.add('is-visible');
    }
  }, { threshold: 0.12 });

  cards.forEach(c => io.observe(c));

  const lightbox = document.getElementById('lightbox');
  const lightboxImg = lightbox.querySelector('img');
  const images = Array.from(document.querySelectorAll('.card img'));
  const lbPrev = document.getElementById('lbPrev');
  const lbNext = document.getElementById('lbNext');

  let currentIndex = 0;

  images.forEach(img => {
    img.setAttribute('draggable', 'false');
    img.addEventListener('contextmenu', (e) => e.preventDefault());
    img.addEventListener('dragstart', (e) => e.preventDefault());
  });

  function isDesktopNow(){
    return window.matchMedia('(min-width: 769px)').matches;
  }

  /* ✅ Desktop-only "story" ratios:
     - 9:16 (h/w ≈ 1.777...)
     - 2:3-ish (h/w ≈ 1.5) including 3712x5638 (≈ 1.518...)
     Only these get the scrollable, width-filled view.
  */
  function isStoryRatio(r){
    const isNineSixteen = (r >= 1.70 && r <= 1.90);
    const isTwoThirds = (r >= 1.45 && r <= 1.60);
    return isNineSixteen || isTwoThirds;
  }

  function isStoryFromImg(imgEl){
    const w = imgEl && imgEl.naturalWidth;
    const h = imgEl && imgEl.naturalHeight;
    if(!w || !h) return false;
    return isStoryRatio(h / w);
  }

  
  function isZoomFromImg(imgEl){
    // Specific request: zoom the image whose filename includes "3000x3093"
    return !!(imgEl && imgEl.src && imgEl.src.indexOf('3000x3093') !== -1);
  }

  function updateZoomModeForIndex(i){
    const shouldZoom = isZoomFromImg(images[i]);
    // If story mode is active (desktop-only), don't stack zoom mode
    if (lightbox.classList.contains('is-story')) {
      lightbox.classList.remove('is-zoom');
      return;
    }
    lightbox.classList.toggle('is-zoom', shouldZoom);
    if (shouldZoom) lightbox.scrollTop = 0;
  }

function applyDesktopLightboxUI(open){
    // Only on desktop: top-right nav layout while lightbox is open
    document.body.classList.toggle('lb-open', open && isDesktopNow());
  }

  function updateStoryModeForIndex(i){
    if (!isDesktopNow()) {
      lightbox.classList.remove('is-story');
      return;
    }

    const srcImg = images[i];
    const shouldStory = isStoryFromImg(srcImg);

    lightbox.classList.toggle('is-story', shouldStory);
    if (shouldStory) lightbox.scrollTop = 0;
  }

  function openLightboxAt(i){
    currentIndex = i;

    updateStoryModeForIndex(currentIndex);
    updateZoomModeForIndex(currentIndex);

    // set src
    lightboxImg.src = images[currentIndex].src;

    // fallback in case the thumbnail's natural sizes weren't ready
    lightboxImg.onload = () => {
      if (!isDesktopNow()) {
        lightbox.classList.remove('is-story');
        return;
      }
      const r = lightboxImg.naturalHeight / lightboxImg.naturalWidth;
      const shouldStory = isStoryRatio(r);
      lightbox.classList.toggle('is-story', shouldStory);
      if (shouldStory) {
        lightbox.classList.remove('is-zoom');
        lightbox.scrollTop = 0;
      } else {
        updateZoomModeForIndex(currentIndex);
      }
    };

    lightbox.classList.add('is-open');
    document.body.style.overflow = 'hidden';
    applyDesktopLightboxUI(true);
  }

  function showImage(index){
    if(index < 0) index = images.length - 1;
    if(index >= images.length) index = 0;
    openLightboxAt(index);
  }

  images.forEach((img, index) => {
    img.addEventListener('click', () => {
      openLightboxAt(index);
    });
  });

  lbPrev.addEventListener('click', (e) => {
    e.stopPropagation();
    showImage(currentIndex - 1);
  });
  lbNext.addEventListener('click', (e) => {
    e.stopPropagation();
    showImage(currentIndex + 1);
  });

  lightboxImg.addEventListener('contextmenu', (e) => e.preventDefault());
  lightboxImg.addEventListener('dragstart', (e) => e.preventDefault());

  // ✅ Mobile swipe gestures (left/right) in lightbox
  let touchStartX = 0;
  let touchStartY = 0;
  let touching = false;
  let suppressClick = false;

  lightbox.addEventListener('touchstart', (e) => {
    if (!lightbox.classList.contains('is-open')) return;
    if (!e.touches || e.touches.length !== 1) return;
    touching = true;
    touchStartX = e.touches[0].clientX;
    touchStartY = e.touches[0].clientY;
  }, { passive: true });

  lightbox.addEventListener('touchend', (e) => {
    if (!touching) return;
    touching = false;
    if (!e.changedTouches || e.changedTouches.length !== 1) return;

    const endX = e.changedTouches[0].clientX;
    const endY = e.changedTouches[0].clientY;
    const dx = endX - touchStartX;
    const dy = endY - touchStartY;

    // horizontal swipe only
    if (Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy) * 1.2) {
      suppressClick = true;
      if (dx < 0) showImage(currentIndex + 1);
      else showImage(currentIndex - 1);
      // release click suppression after this tick
      setTimeout(() => { suppressClick = false; }, 0);
    }
  }, { passive: true });

  lightbox.addEventListener('click', () => {
    if (suppressClick) return;
    lightbox.classList.remove('is-open');
    lightbox.classList.remove('is-story');
    lightbox.classList.remove('is-zoom');
    lightboxImg.src = '';
    document.body.style.overflow = '';
    applyDesktopLightboxUI(false);
  });
  lightboxImg.addEventListener('click', (e) => e.stopPropagation());

  document.addEventListener('keydown', (e) => {
    if(!lightbox.classList.contains('is-open')) return;

    if (e.key === 'Escape') {
      lightbox.classList.remove('is-open');
      lightbox.classList.remove('is-story');
      lightbox.classList.remove('is-zoom');
      lightboxImg.src = '';
      document.body.style.overflow = '';
      applyDesktopLightboxUI(false);
    }
    if (e.key === 'ArrowRight') showImage(currentIndex + 1);
    if (e.key === 'ArrowLeft') showImage(currentIndex - 1);
  });

  // If the user resizes while open, keep desktop-only rules consistent
  window.addEventListener('resize', () => {
    if (!lightbox.classList.contains('is-open')) return;
    applyDesktopLightboxUI(true);
    updateStoryModeForIndex(currentIndex);
  });

  document.addEventListener('contextmenu', (e) => {
    if (lightbox.classList.contains('is-open')) e.preventDefault();
  });
</script>

</body>
</html>

